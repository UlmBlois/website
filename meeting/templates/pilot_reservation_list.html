{% extends "base_logged.html" %}
{% load i18n %}

{% block messages %}
{{meeting.pk}}
  {% if meeting.registration_aviable%}
    <div class="alert alert-success" role="alert">
      {% trans 'Reservation open.'%}
    </div>
  {% elif not meeting.registration_open%}
    <div class="alert alert-danger" role="alert">
      {% trans 'Reservation closed.'%}
    </div>
  {% else %}
    <div class="alert alert-danger" role="alert">
      {% trans 'No more time slot aviable.'%}
    </div>
  {% endif %}
{% endblock %}


{% block page_title%}
  {% trans "Your Reservations" %}
  <a class="btn btn-success" role="button" href="{% url 'pilot_create_reservation' %}">
    <span class="fas fa-plus-circle"></span>{% trans "Add New" %}
  </a>
{% endblock %}

{% block content %}
<div class="mx-4">
{% for res in reservation_list %}
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">{{res.meeting}}</h5>
    <h6 class="card-subtitle mb-2 text-muted">{{res.reservation_number}}</h6>
    {% if res.is_active %}
    <a href="{% url 'pilot_update_reservation' res.pk %}" class="btn btn-warning"><span class="fas fa-pen"></span>{% trans "Edit" %}</a>
    <a href="{% url 'pilot_delete_reservation' res.pk %}" class="btn btn-danger"><span class="fas fa-minus-circle"></span>{% trans "Delete" %}</a>
    <form action="{% url 'ajax_cancel_reservation' pk=res.pk %}" method=POST>
      {% csrf_token %}
      <button class="btn btn-danger"><span class="fas fa-minus-circle"></span>{% trans "Cancel" %}</button>
    </form>
    {% endif %}
  </div>
</div>
{% endfor %}
</div>

{% include 'pagination.html' %}

{% endblock %}
